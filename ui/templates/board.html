<html>
  <head>

    <link href="/css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/chessboard-0.3.0.min.css">
    <script src="/js/chessboard-0.3.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js"></script>
    <script
       src="https://code.jquery.com/jquery-1.12.4.min.js"
       integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
       crossorigin="anonymous"></script>    
    

  </head>
  <body>
    
    <h1>Ghess</h1>
    
    <div id="board" style="width: 400px"></div>
    
    <form action="/makemove" >
      <div>
	<input type="text" id="move" name="move" autofocus>
	<input type="submit" value="Make Move" >
      </div>
    </form>
    <button type="button" id="test">Button</button>          
    <div>{{ .Feedback }}</div>
    <div id="output"></div>
    <button class="btn" type="button" onclick="orientation()" >Flip Board</button>
    <script>
      var pos = '{{ .Fen }}';
      var config = {
        position: pos,
      };
      var board = ChessBoard('board', config);

      function orientation(){
        board.flip();
      }
     // AJAX

     (function() {
	 window.onload = function() {
	     var form = document.querySelector("form")
	     form.addEventListener("submit", function(e) {
		 e.preventDefault()
		 var x = new XMLHttpRequest()
		 x.onreadystatechange = function() {
		     if(x.readyState == 4) {
			 //console.log(x.response)
			 board.position(x.response)
		     }
		 }
		 x.open("POST", "/makemove")
		 x.send(new FormData(form))
	     })
	 }
     })()   
  </script>    
  </body>  
</html>
